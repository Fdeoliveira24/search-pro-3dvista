<!-- Filtering Tab -->
<div id="filtering-tab" class="panel-content">
  <!-- Page Header -->
  <div class="panel-header">
    <div class="panel-title">
      <i class="fas fa-filter"></i>
      <h2>Filtering Settings</h2>
    </div>
    <p class="panel-subtitle">
      Configure content filtering rules. Only one filter group can be active at
      a time.
    </p>
  </div>

  <!-- =========================
       MAIN FILTER (TOP-LEVEL)
       ========================= -->
  <section class="config-section filter-group" data-group="main">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-toggle-on"></i>
        <h3>Main Filter</h3>
      </div>
      <p class="section-subtitle">
        Primary filtering mode that applies to all content types
      </p>
    </div>

    <div class="form-grid grid-1-col">
      <!-- Mode -->
      <div class="form-group">
        <label class="form-label" for="mainFilterMode">
          Filter Mode
          <span
            class="help-tooltip"
            data-tooltip="Controls how the top-level value filter behaves. 
None: do nothing. 
Whitelist: show items that match any Allowed Values. 
Blacklist: hide items that match any Blacklisted Values."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="mainFilterMode"
          class="form-select filter-mode-select"
          data-group="main"
        >
          <option value="none">None</option>
          <option value="whitelist">Whitelist</option>
          <option value="blacklist">Blacklist</option>
        </select>
      </div>

      <!-- Allowed / Blacklisted (hidden until mode ≠ none) -->
      <div class="filter-inputs" id="mainInputs" style="display: none">
        <div class="inline-field-pair">
          <div class="form-group">
            <label class="form-label" for="mainAllowedValues">
              Allowed Values
              <span
                class="help-tooltip"
                data-tooltip="Comma-separated text values to SHOW when Whitelist is active. 
Matches are checked against labels, descriptions and tags."
              >
                <i class="fas fa-question-circle"></i>
              </span>
            </label>
            <input
              id="mainAllowedValues"
              type="text"
              class="form-input group-input"
              name="filter.allowedValues"
              placeholder="public, visitor, guest, tour"
            />
          </div>

          <div class="form-group">
            <label class="form-label" for="mainBlacklistedValues">
              Blacklisted Values
              <span
                class="help-tooltip"
                data-tooltip="Comma-separated text values to HIDE when Blacklist is active. 
Matches are checked against labels, descriptions and tags."
              >
                <i class="fas fa-question-circle"></i>
              </span>
            </label>
            <input
              id="mainBlacklistedValues"
              type="text"
              class="form-input group-input"
              name="filter.blacklistedValues"
              placeholder="private, restricted, staff"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       VALUE MATCH MODE
       ========================= -->
  <section class="config-section" data-group="valueMatch">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-search"></i>
        <h3>Value Match Mode</h3>
      </div>
      <p class="section-subtitle">
        Control how filter values are compared with element labels
      </p>
    </div>

    <div class="form-grid grid-2-col">
      <div class="form-group">
        <label class="form-label" for="whitelistMatchMode">
          Whitelist Match Mode
          <span
            class="help-tooltip"
            data-tooltip="How Whitelist values are compared against text. 
Exact — full string match. 
Contains — substring match. 
Starts With — prefix match. 
Regex — regular expression."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="whitelistMatchMode"
          class="form-select"
          name="filter.valueMatchMode.whitelist"
        >
          <option value="exact">Exact</option>
          <option value="contains">Contains</option>
          <option value="startsWith">Starts With</option>
          <option value="regex">Regex</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="blacklistMatchMode">
          Blacklist Match Mode
          <span
            class="help-tooltip"
            data-tooltip="How Blacklist values are compared against text. 
Exact — full string match. 
Contains — substring match (recommended). 
Starts With — prefix match. 
Regex — regular expression."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="blacklistMatchMode"
          class="form-select"
          name="filter.valueMatchMode.blacklist"
        >
          <option value="exact">Exact</option>
          <option value="contains">Contains</option>
          <option value="startsWith">Starts With</option>
          <option value="regex">Regex</option>
        </select>
      </div>
    </div>
  </section>

  <!-- =========================
       MEDIA INDEXES
       ========================= -->
  <section class="config-section filter-group" data-group="mediaIndexes">
    <div class="section-header">
      <div class="section-title">
        <i class="far fa-image"></i>
        <h3>Media Indexes</h3>
      </div>
      <p class="section-subtitle">
        Filter specific panoramas by their position in the tour
      </p>
    </div>

    <div class="form-grid grid-1-col">
      <div class="form-group">
        <label class="form-label" for="mediaIndexesMode">
          Mode
          <span
            class="help-tooltip"
            data-tooltip="Whitelist — show only listed panorama indexes. 
Blacklist — hide listed indexes. 
Indexes are 0-based (0 is the first panorama)."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="mediaIndexesMode"
          class="form-select filter-mode-select"
          data-group="mediaIndexes"
        >
          <option value="none">None</option>
          <option value="whitelist">Whitelist</option>
          <option value="blacklist">Blacklist</option>
        </select>
      </div>

      <div class="filter-inputs" id="mediaIndexesInputs" style="display: none">
        <div class="inline-field-pair">
          <div class="form-group">
            <label class="form-label" for="mediaIndexesAllowed">
              Allowed Indexes
              <span
                class="help-tooltip"
                data-tooltip="Comma-separated 0-based indexes to SHOW when Whitelist is active. Example: 0, 1, 5"
              >
                <i class="fas fa-question-circle"></i>
              </span>
            </label>
            <input
              id="mediaIndexesAllowed"
              type="text"
              class="form-input group-input"
              name="filter.mediaIndexes.allowed"
              placeholder="0, 1, 5"
            />
          </div>

          <div class="form-group">
            <label class="form-label" for="mediaIndexesBlacklisted">
              Blacklisted Indexes
              <span
                class="help-tooltip"
                data-tooltip="Comma-separated 0-based indexes to HIDE when Blacklist is active. Example: 0, 3"
              >
                <i class="fas fa-question-circle"></i>
              </span>
            </label>
            <input
              id="mediaIndexesBlacklisted"
              type="text"
              class="form-input group-input"
              name="filter.mediaIndexes.blacklisted"
              placeholder="0, 3"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       ELEMENT TYPES
       ========================= -->
  <section class="config-section filter-group" data-group="elementTypes">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-shapes"></i>
        <h3>Element Types</h3>
      </div>
      <p class="section-subtitle">
        Filter content based on element type (Panorama, Hotspot, Video, etc.)
      </p>
    </div>

    <div class="form-grid grid-1-col">
      <div class="form-group">
        <label class="form-label" for="elementTypesMode">
          Mode
          <span
            class="help-tooltip"
            data-tooltip="Choose which element types to show (Whitelist) or hide (Blacklist)."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="elementTypesMode"
          class="form-select filter-mode-select"
          data-group="elementTypes"
        >
          <option value="none">None</option>
          <option value="whitelist">Whitelist</option>
          <option value="blacklist">Blacklist</option>
        </select>
      </div>

      <div class="filter-inputs" id="elementTypesInputs" style="display: none">
        <div class="types-grid">
          <!-- Checkbox grid; values must match config keys exactly -->
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Panorama" />
            Panorama</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Hotspot" />
            Hotspot</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Polygon" />
            Polygon</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Video" />
            Video</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Webframe" />
            Webframe</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Image" />
            Image</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Text" />
            Text</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="ProjectedImage" />
            Projected Image</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Element" />
            Element</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Business" />
            Business</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="Container" />
            Container</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="3DModel" /> 3D
            Model</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="3DHotspot" /> 3D
            Hotspot</label
          >
          <label class="checkbox"
            ><input type="checkbox" name="elementType" value="3DModelObject" />
            3D Model Object</label
          >
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       ELEMENT LABELS
       ========================= -->
  <section class="config-section filter-group" data-group="elementLabels">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-tag"></i>
        <h3>Element Labels</h3>
      </div>
      <p class="section-subtitle">
        Filter content based on partial text matches in element labels
      </p>
    </div>

    <div class="form-grid grid-1-col">
      <div class="form-group">
        <label class="form-label" for="elementLabelsMode">
          Mode
          <span
            class="help-tooltip"
            data-tooltip="Whitelist — show elements whose labels contain any Allowed Values. 
Blacklist — hide elements whose labels contain any Blacklisted Values."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="elementLabelsMode"
          class="form-select filter-mode-select"
          data-group="elementLabels"
        >
          <option value="none">None</option>
          <option value="whitelist">Whitelist</option>
          <option value="blacklist">Blacklist</option>
        </select>
      </div>

      <div class="filter-inputs" id="elementLabelsInputs" style="display: none">
        <div class="inline-field-pair">
          <div class="form-group">
            <label class="form-label" for="elementLabelsAllowed"
              >Allowed Values</label
            >
            <input
              id="elementLabelsAllowed"
              type="text"
              class="form-input group-input"
              name="filter.elementLabels.allowedValues"
              placeholder="reception, lobby, entrance"
            />
          </div>

          <div class="form-group">
            <label class="form-label" for="elementLabelsBlacklisted"
              >Blacklisted Values</label
            >
            <input
              id="elementLabelsBlacklisted"
              type="text"
              class="form-input group-input"
              name="filter.elementLabels.blacklistedValues"
              placeholder="private, staff, maintenance"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       TAG FILTERING
       ========================= -->
  <section class="config-section filter-group" data-group="tagFiltering">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-hashtag"></i>
        <h3>Tag Filtering</h3>
      </div>
      <p class="section-subtitle">Filter content based on element tags</p>
    </div>

    <div class="form-grid grid-1-col">
      <div class="form-group">
        <label class="form-label" for="tagFilteringMode">
          Mode
          <span
            class="help-tooltip"
            data-tooltip="Whitelist — show items with any Allowed Tags. 
Blacklist — hide items with any Blacklisted Tags."
          >
            <i class="fas fa-question-circle"></i>
          </span>
        </label>
        <select
          id="tagFilteringMode"
          class="form-select filter-mode-select"
          data-group="tagFiltering"
        >
          <option value="none">None</option>
          <option value="whitelist">Whitelist</option>
          <option value="blacklist">Blacklist</option>
        </select>
      </div>

      <div class="filter-inputs" id="tagFilteringInputs" style="display: none">
        <div class="inline-field-pair">
          <div class="form-group">
            <label class="form-label" for="tagFilteringAllowed"
              >Allowed Tags</label
            >
            <input
              id="tagFilteringAllowed"
              type="text"
              class="form-input group-input"
              name="filter.tagFiltering.allowedTags"
              placeholder="public, tour, visitor"
            />
          </div>

          <div class="form-group">
            <label class="form-label" for="tagFilteringBlacklisted"
              >Blacklisted Tags</label
            >
            <input
              id="tagFilteringBlacklisted"
              type="text"
              class="form-input group-input"
              name="filter.tagFiltering.blacklistedTags"
              placeholder="private, restricted, internal"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       EXAMPLES / NOTE
       ========================= -->
  <section class="config-section">
    <div class="section-header">
      <div class="section-title">
        <i class="fas fa-lightbulb"></i>
        <h3>Filter Examples</h3>
      </div>
      <p class="section-subtitle">
        Common filtering scenarios and setup examples
      </p>
    </div>

    <div class="examples">
      <ul>
        <li>
          <strong>Hide private areas:</strong> Main Filter &rarr; Blacklist +
          "private, restricted, staff".
        </li>
        <li>
          <strong>Show only public areas:</strong> Main Filter &rarr; Whitelist
          + "public, visitor, guest, tour".
        </li>
        <li>
          <strong>Hide specific element types:</strong> Element Types &rarr;
          Blacklist + check unwanted types.
        </li>
        <li>
          <strong>Show only certain panoramas:</strong> Media Indexes &rarr;
          Whitelist + indexes like "0, 1, 5".
        </li>
      </ul>
      <div class="notice notice-warning">
        <i class="fas fa-exclamation-triangle"></i>
        <span
          ><strong>Mutual Exclusivity:</strong> Only one filter group can be
          active at a time. When you activate one filter, all others are
          automatically disabled.</span
        >
      </div>
    </div>
  </section>
</div>
